```plantuml
@startmindmap
* JVM
  ** java代码的执行
  ***_ 代码编译为class
  ****_ javac
  ***_ 装载class
  ****_ ClassLoad
  ***_ 执行class
  ****_ 解释执行
  ****_ 编译执行
  *****_ client compiler
  *****_ server compiler
  ** 内存管理
  ***_ 内存空间
  ****_ 方法区
  ****_ 堆
  ****_ 虚拟机栈
  ****_ 本地方法栈
  ****_ pc程序计数器

***_ 内存分配
****_ 堆上分配
****_ TLAB分配
****_ 栈上分配

***_ 内存回收
****_ 算法
*****_ Copy
*****_ Mark-Sweep
*****_ Mark-Compart

****_ Sun JDK
*****_ 分代回收
******_ 新生代可用的GC
*******_ 串行Copying
*******_ 并行回收Copying
*******_ 并行Copying

******_ Minor GC触发机制以及日志格式
******_ 旧生代可用的GC
*******_ 串行Mark-Sweep-Compart
*******_ 并行Copying
*******_ 并发Mark-Sweep

******_ Full GC触发机制以及日志格式

*****_ GC参数
*****_ G1

***_ 内存情况分析
****_ jconsole
****_ visualvm
****_ jstat
****_ jmap
****_ MAT

** 线程资源同步和交互
***_ 线程资源同步
****_ 线程资源执行机制
****_ 线程资源同步机制
*****_ Synchronized 的实现机制
*****_ lock/unlock 的实现机制

***_ 线程交互机制
****_ Object.wait/notity/notityAll/
****_ 并发包提供的交互机制
*****_ CountDownLatch
*****_ Semaphore

***_ 线程状态及分析方法
****_ jstack
****_ TDA
@endmindmap
```

#### JVM
1. 基本概念
JVM是可运行java代码的假想计算机，包括一套字节码指令集、一组寄存器、一个栈、一个垃圾回收堆和一个存储方法域。JVM是运行在操作系统之上的，它与硬件没有直接的交互。
2. 运行过程
2）Java源文件——>编译器——>字节码
3）字节码——>JVM——>机器码


#### 运行时数据区（JMM内存分区）
分为两类，线程共享，线程私有
1. 线程共享
- 堆
- 字符串常量池
- 直接内存
2. 线程私有
- 程序计数器
记录线程的执行位置
- 虚拟机栈
存放栈帧（其实就是方法），参数，方法返回地址
- 本地方法栈
JNI 的方法

#### 对象的创建
1. 类加载检查
2. 分配内存
3. 初始化零值
4. 设置对象头
5. 执行init方法

#### 对象的内存布局
对象头，实例数据，对齐填充

##### 对象头
标记字段：hashcode，对象年龄，锁状态。。。\
类型指针：具体是哪个类的实例




